{% extends 'missions/irc/base.html' %}
{% comment %}
# This file is part of OpenHatch.
# Copyright (C) 2010 Jack Grigg
#
# This program is free software: you can redistribute it and/or modify
# it under the terms of the GNU Affero General Public License as published by
# the Free Software Foundation, either version 3 of the License, or
# (at your option) any later version.
#
# This program is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
# GNU Affero General Public License for more details.
#
# You should have received a copy of the GNU Affero General Public License
# along with this program.  If not, see <http://www.gnu.org/licenses/>.
{% endcomment %}

{% block mission_main %}
    <h3>Using IRC</h3>

      <h2>Your mission</h2>
      <p>Now your mission is to find and use the secret words:</p>
      <ul class="raquo_bullets">
      <li>When you join, the mission bot (<code>{{ irc_botnick }}</code>) will send you a private message containing some secret words.  Enter your nick and the secret words in the form below to associate your session with your OpenHatch account.</li>
      <li>In the channel, say hello to the bot after you have associated your session.  If the association is properly in place, the bot will respond, giving you further instructions.</li>
      <li>All of the rest of the mission will take place over IRC.</li>
      <li>The association between your nick and your OpenHatch account lasts only for as long as you are in the channel with that nick.  (This means that if you do not complete the entire mission in one shot, you will need to start over next time.  Don't worry - it won't take long.)</li>
      </ul>

      {% if active_session %}
      <p>You have an active session with nick <code>{{ active_session.nick }}</code>.</p>
      {% else %}
      <form method="post" action="{% url "mysite.missions.irc.views.irc_session_password_submit" %}#form-row">{% csrf_token %}
        <div class="form-row">
      {% if session_password_error_message %}
          <ul class="errorlist"><li>{{ session_password_error_message }}</li></ul>
      {% endif %}
          {{ session_password_form.nick.errors }}
          <br style="clear: left;" />
          Your nick: <br style="clear: left;" />
          {{ session_password_form.nick }}
          <br style="clear: left;" />
          {{ session_password_form.password.errors }}
          <br style="clear: left;" />
          Secret words: <br style="clear: left;" />
          {{ session_password_form.password }}
          <br style="clear: left;" />
          <input type="submit" value="Submit" style="float: none;" />
        </div>
      </form>
      {% endif %}
{% endblock mission_main %}
